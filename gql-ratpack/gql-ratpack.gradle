plugins {
  id 'groovy'
  id 'maven-publish'
}

dependencies {
  compile project(':gql-core')

  compile "io.ratpack:ratpack-core:$ratpack"
  compile "io.ratpack:ratpack-guice:$ratpack"
  compile "org.codehaus.groovy:groovy-all:$groovy"
}

task sourcesJar(type: Jar, dependsOn: classes) {
  classifier = 'sources'
  from sourceSets.main.allSource
}

artifacts {
  archives sourcesJar
}

publishing {
  publications {
    'gql-ratpack'(MavenPublication) {
      groupId    "$releaseGroup"
      artifactId 'gql-ratpack'
      version    "$releaseVersion"

      from components.java
      artifact sourcesJar
    }
  }
}
